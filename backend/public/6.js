(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"KnK+":function(i,t,e){"use strict";var o=e("txcL"),r={name:"TheContentMixin",methods:{generateBreadcrumb:function(i){this.$store.dispatch(o.a,i)},getTitle:function(i){return i[i.length-1].text},setNotifications:function(i){this.$store.dispatch(o.b,i)},scrollToTop:function(){window.scroll({top:0,left:0,behavior:"smooth"})}}},n=e("KHd+"),a=Object(n.a)(r,void 0,void 0,!1,null,null,null);t.a=a.exports},PTi8:function(i,t,e){"use strict";e.r(t);var o=e("vDqi"),r=e.n(o),n={name:"TheUserSettings",mixins:[e("KnK+").a],data:function(){return{breadcrumbs:[{text:"Главная",to:{path:"/"}},{text:"Настройки пользователя",active:!0}],form:{field_list:[],group_id:[],comp_id:1},notification:{priority:0,region:[0],tt_type:0,serv_cat:0},group_list:[],field_list:[],tab:1,checkedNames:[],checkedRegions:[],formErrors:null,errors:null,isLoading:!0}},mounted:function(){this.generateBreadcrumb(this.breadcrumbs),this.getGroupList(),this.getMainList(),this.getUserNotificationList()},watch:{},components:{},methods:{getGroupList:function(){var i=this;r.a.get("/api/user_settings/group_list").then((function(t){i.group_list=t.data.group_list,i.field_list=t.data.field_list}))},getMainList:function(){var i=this;r.a.get("/api/user_settings/main_list").then((function(t){i.form.group_id=t.data.group,i.form.field_list=t.data.regions}))},clearFieldList:function(){this.form.field_list[2]=[]},saveUserRegion:function(i){var t=this;this.$data.form.comp_id=i,2==i&&0==this.form.field_list[2].length&&this.form.field_list[2].push(null),r.a.post("/api/user_settings/set_user_region",this.$data.form).then((function(i){console.log(i.data)})).catch((function(i){i.response.data&&(t.formErrors=i.response.data.errors)}))},getUserNotificationList:function(){var i=this;r.a.get("/api/user_settings/get_user_notification").then((function(t){i.notification.priority=t.data.priority,i.notification.region=t.data.region,i.notification.tt_type=t.data.tt_type,i.notification.serv_cat=t.data.serv_cat}))},saveUserNotification:function(){var i=this;r.a.post("/api/user_settings/set_user_notification",this.$data.notification).then((function(i){console.log(i.data)})).catch((function(t){t.response.data&&(i.formErrors=t.response.data.errors)}))}}},a=e("KHd+"),s=Object(a.a)(n,(function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticStyle:{height:"99%"}},[e("div",{staticClass:"card",staticStyle:{height:"100%"}},[e("div",{staticClass:"row no-space",staticStyle:{height:"100%"}},[e("div",{staticClass:"col-md-2 no-space left-menu"},[e("div",[e("hr"),i._v(" "),e("hr"),i._v(" "),e("ul",{staticClass:"list-group",staticStyle:{"max-height":"85%",overflow:"auto"}},[e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[e("a",{attrs:{href:"#"},on:{click:function(i){}}},[i._v(" Общие настройки")])]),i._v(" "),e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[e("a",{attrs:{href:"#"},on:{click:function(t){i.tab=1}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:1==i.tab,expression:"tab == 1"}],staticStyle:{color:"blue"}},[i._v(" > ")]),i._v("\n                                Сервис тикеты\n                            ")])]),i._v(" "),e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[e("a",{attrs:{href:"#"},on:{click:function(t){i.tab=3}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:3==i.tab,expression:"tab == 3"}],staticStyle:{color:"blue"}},[i._v(" > ")]),i._v("\n                                Ресурс тикеты\n                            ")])]),i._v(" "),e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[e("a",{attrs:{href:"#"},on:{click:function(i){}}},[i._v(" Аварии")])]),i._v(" "),e("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[e("a",{attrs:{href:"#"},on:{click:function(t){i.tab=2}}},[e("span",{directives:[{name:"show",rawName:"v-show",value:2==i.tab,expression:"tab == 2"}],staticStyle:{color:"blue"}},[i._v(" > ")]),i._v("\n                                Нотификации email/sms\n                            ")])])])])]),i._v(" "),e("div",{staticClass:"col-md-10 no-space",staticStyle:{height:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:1==i.tab,expression:"tab == 1"}],staticStyle:{padding:"20px"}},[i._m(0),i._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-3"},[i._v("\n                            Группа:\n                            "),e("hr"),i._v(" "),i._l(i.group_list,(function(t,o){return e("div",{key:o},[1==t.comp_id?e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.form.group_id[1],expression:"form.group_id[1]"}],attrs:{type:"radio",id:t.id},domProps:{value:t.id,checked:i._q(i.form.group_id[1],t.id)},on:{change:function(e){return i.$set(i.form.group_id,1,t.id)}}}),i._v(" "),e("label",{attrs:{for:t.id}},[i._v(i._s(t.group_name))])]):i._e()])}))],2),i._v(" "),e("div",{staticClass:"form-group col-md-3"},[i._v("\n                            Регион:\n                            "),e("hr"),i._v(" "),i._l(i.field_list,(function(t,o){return e("div",{key:o},[1==t.comp_id?e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.form.field_list[1],expression:"form.field_list[1]"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t.id,checked:Array.isArray(i.form.field_list[1])?i._i(i.form.field_list[1],t.id)>-1:i.form.field_list[1]},on:{change:function(e){var o=i.form.field_list[1],r=e.target,n=!!r.checked;if(Array.isArray(o)){var a=t.id,s=i._i(o,a);r.checked?s<0&&i.$set(i.form.field_list,1,o.concat([a])):s>-1&&i.$set(i.form.field_list,1,o.slice(0,s).concat(o.slice(s+1)))}else i.$set(i.form.field_list,1,n)}}}),i._v(" "),e("label",{attrs:{for:t.id}},[i._v(i._s(t.field_name))])]):i._e()])}))],2)]),i._v(" "),e("hr"),i._v(" "),e("div",{staticClass:"text-left"},[e("a",{staticClass:"btn btn-primary btn-sm",staticStyle:{width:"150px"},attrs:{href:"#"},on:{click:function(t){return i.saveUserRegion(1)}}},[i._v("Обновить")])])]),i._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:3==i.tab,expression:"tab == 3"}],staticStyle:{padding:"20px"}},[i._m(1),i._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-3"},[i._v("\n                            Группа:\n                            "),e("hr"),i._v(" "),i._l(i.group_list,(function(t,o){return e("div",{key:o},[2==t.comp_id?e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.form.group_id[2],expression:"form.group_id[2]"}],attrs:{type:"radio",id:t.id},domProps:{value:t.id,checked:i._q(i.form.group_id[2],t.id)},on:{click:function(t){return i.clearFieldList()},change:function(e){return i.$set(i.form.group_id,2,t.id)}}}),i._v(" "),e("label",{attrs:{for:t.id}},[i._v(i._s(t.group_name))])]):i._e()])}))],2),i._v(" "),e("div",{staticClass:"form-group col-md-3"},[i._v("\n                            Регион:\n                            "),e("hr"),i._v(" "),i._l(i.field_list,(function(t,o){return e("div",{key:o},[2==t.comp_id&&3==i.form.group_id[2]?e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.form.field_list[2],expression:"form.field_list[2]"}],attrs:{type:"checkbox",id:t.id},domProps:{value:t.id,checked:Array.isArray(i.form.field_list[2])?i._i(i.form.field_list[2],t.id)>-1:i.form.field_list[2]},on:{change:function(e){var o=i.form.field_list[2],r=e.target,n=!!r.checked;if(Array.isArray(o)){var a=t.id,s=i._i(o,a);r.checked?s<0&&i.$set(i.form.field_list,2,o.concat([a])):s>-1&&i.$set(i.form.field_list,2,o.slice(0,s).concat(o.slice(s+1)))}else i.$set(i.form.field_list,2,n)}}}),i._v(" "),e("label",{attrs:{for:t.id}},[i._v(i._s(t.field_name))])]):i._e()])}))],2)]),i._v(" "),e("hr"),i._v(" "),e("div",{staticClass:"text-left"},[e("a",{staticClass:"btn btn-primary btn-sm",staticStyle:{width:"150px"},attrs:{href:"#"},on:{click:function(t){return i.saveUserRegion(2)}}},[i._v("Обновить")])])]),i._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:2==i.tab,expression:"tab == 2"}],staticStyle:{padding:"20px"}},[i._m(2),i._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-3"},[i._v("\n                            Приоритеты:\n                            "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.priority,expression:"notification.priority"}],attrs:{type:"radio",id:"prior_all",value:"0"},domProps:{checked:i._q(i.notification.priority,"0")},on:{change:function(t){return i.$set(i.notification,"priority","0")}}}),i._v(" "),e("label",{attrs:{for:"prior_all"}},[i._v("По всем")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.priority,expression:"notification.priority"}],attrs:{type:"radio",id:"prior_emergency",value:"1"},domProps:{checked:i._q(i.notification.priority,"1")},on:{change:function(t){return i.$set(i.notification,"priority","1")}}}),i._v(" "),e("label",{attrs:{for:"prior_emergency"}},[i._v("Только Emergency")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.priority,expression:"notification.priority"}],attrs:{type:"radio",id:"prior_critical",value:"2"},domProps:{checked:i._q(i.notification.priority,"2")},on:{change:function(t){return i.$set(i.notification,"priority","2")}}}),i._v(" "),e("label",{attrs:{for:"prior_critical"}},[i._v("Critical и выше")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.priority,expression:"notification.priority"}],attrs:{type:"radio",id:"prior_high",value:"3"},domProps:{checked:i._q(i.notification.priority,"3")},on:{change:function(t){return i.$set(i.notification,"priority","3")}}}),i._v(" "),e("label",{attrs:{for:"prior_high"}},[i._v("High и выше")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.priority,expression:"notification.priority"}],attrs:{type:"radio",id:"prior_medium",value:"4"},domProps:{checked:i._q(i.notification.priority,"4")},on:{change:function(t){return i.$set(i.notification,"priority","4")}}}),i._v(" "),e("label",{attrs:{for:"prior_medium"}},[i._v("Medium и выше")])])]),i._v(" "),e("div",{staticClass:"form-group col-md-3"},[i._v("\n                            Регион:\n                            "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.region,expression:"notification.region"}],attrs:{type:"checkbox",id:"region_all",value:"0"},domProps:{checked:Array.isArray(i.notification.region)?i._i(i.notification.region,"0")>-1:i.notification.region},on:{change:function(t){var e=i.notification.region,o=t.target,r=!!o.checked;if(Array.isArray(e)){var n=i._i(e,"0");o.checked?n<0&&i.$set(i.notification,"region",e.concat(["0"])):n>-1&&i.$set(i.notification,"region",e.slice(0,n).concat(e.slice(n+1)))}else i.$set(i.notification,"region",r)}}}),i._v(" "),e("label",{attrs:{for:"region_all"}},[i._v("По всем регионам")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.region,expression:"notification.region"}],attrs:{type:"checkbox",id:"region_almaty",value:"1"},domProps:{checked:Array.isArray(i.notification.region)?i._i(i.notification.region,"1")>-1:i.notification.region},on:{change:function(t){var e=i.notification.region,o=t.target,r=!!o.checked;if(Array.isArray(e)){var n=i._i(e,"1");o.checked?n<0&&i.$set(i.notification,"region",e.concat(["1"])):n>-1&&i.$set(i.notification,"region",e.slice(0,n).concat(e.slice(n+1)))}else i.$set(i.notification,"region",r)}}}),i._v(" "),e("label",{attrs:{for:"region_almaty"}},[i._v("Алматы")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.region,expression:"notification.region"}],attrs:{type:"checkbox",id:"region_astana",value:"8"},domProps:{checked:Array.isArray(i.notification.region)?i._i(i.notification.region,"8")>-1:i.notification.region},on:{change:function(t){var e=i.notification.region,o=t.target,r=!!o.checked;if(Array.isArray(e)){var n=i._i(e,"8");o.checked?n<0&&i.$set(i.notification,"region",e.concat(["8"])):n>-1&&i.$set(i.notification,"region",e.slice(0,n).concat(e.slice(n+1)))}else i.$set(i.notification,"region",r)}}}),i._v(" "),e("label",{attrs:{for:"region_astana"}},[i._v("Нур-Султан")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.region,expression:"notification.region"}],attrs:{type:"checkbox",id:"region_north",value:"3"},domProps:{checked:Array.isArray(i.notification.region)?i._i(i.notification.region,"3")>-1:i.notification.region},on:{change:function(t){var e=i.notification.region,o=t.target,r=!!o.checked;if(Array.isArray(e)){var n=i._i(e,"3");o.checked?n<0&&i.$set(i.notification,"region",e.concat(["3"])):n>-1&&i.$set(i.notification,"region",e.slice(0,n).concat(e.slice(n+1)))}else i.$set(i.notification,"region",r)}}}),i._v(" "),e("label",{attrs:{for:"region_north"}},[i._v("Северный")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.region,expression:"notification.region"}],attrs:{type:"checkbox",id:"region_south",value:"2"},domProps:{checked:Array.isArray(i.notification.region)?i._i(i.notification.region,"2")>-1:i.notification.region},on:{change:function(t){var e=i.notification.region,o=t.target,r=!!o.checked;if(Array.isArray(e)){var n=i._i(e,"2");o.checked?n<0&&i.$set(i.notification,"region",e.concat(["2"])):n>-1&&i.$set(i.notification,"region",e.slice(0,n).concat(e.slice(n+1)))}else i.$set(i.notification,"region",r)}}}),i._v(" "),e("label",{attrs:{for:"region_south"}},[i._v("Южный")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.region,expression:"notification.region"}],attrs:{type:"checkbox",id:"region_east",value:"7"},domProps:{checked:Array.isArray(i.notification.region)?i._i(i.notification.region,"7")>-1:i.notification.region},on:{change:function(t){var e=i.notification.region,o=t.target,r=!!o.checked;if(Array.isArray(e)){var n=i._i(e,"7");o.checked?n<0&&i.$set(i.notification,"region",e.concat(["7"])):n>-1&&i.$set(i.notification,"region",e.slice(0,n).concat(e.slice(n+1)))}else i.$set(i.notification,"region",r)}}}),i._v(" "),e("label",{attrs:{for:"region_east"}},[i._v("Восточный")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.region,expression:"notification.region"}],attrs:{type:"checkbox",id:"region_west",value:"4"},domProps:{checked:Array.isArray(i.notification.region)?i._i(i.notification.region,"4")>-1:i.notification.region},on:{change:function(t){var e=i.notification.region,o=t.target,r=!!o.checked;if(Array.isArray(e)){var n=i._i(e,"4");o.checked?n<0&&i.$set(i.notification,"region",e.concat(["4"])):n>-1&&i.$set(i.notification,"region",e.slice(0,n).concat(e.slice(n+1)))}else i.$set(i.notification,"region",r)}}}),i._v(" "),e("label",{attrs:{for:"region_west"}},[i._v("Западный")])])]),i._v(" "),e("div",{staticClass:"form-group col-md-3"},[i._v("\n                            Тип тикета:\n                            "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.tt_type,expression:"notification.tt_type"}],attrs:{type:"radio",id:"tt_type_all",value:"0"},domProps:{checked:i._q(i.notification.tt_type,"0")},on:{change:function(t){return i.$set(i.notification,"tt_type","0")}}}),i._v(" "),e("label",{attrs:{for:"tt_type_all"}},[i._v("По всем")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.tt_type,expression:"notification.tt_type"}],attrs:{type:"radio",id:"tt_type_event",value:"1"},domProps:{checked:i._q(i.notification.tt_type,"1")},on:{change:function(t){return i.$set(i.notification,"tt_type","1")}}}),i._v(" "),e("label",{attrs:{for:"tt_type_event"}},[i._v("Только События")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.tt_type,expression:"notification.tt_type"}],attrs:{type:"radio",id:"tt_type_incident",value:"2"},domProps:{checked:i._q(i.notification.tt_type,"2")},on:{change:function(t){return i.$set(i.notification,"tt_type","2")}}}),i._v(" "),e("label",{attrs:{for:"tt_type_incident"}},[i._v("Только Инциденты")])])]),i._v(" "),e("div",{staticClass:"form-group col-md-3"},[i._v("\n                            Категория сервиса/сайта:\n                            "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.serv_cat,expression:"notification.serv_cat"}],attrs:{type:"radio",id:"serv_cat_all",value:"0"},domProps:{checked:i._q(i.notification.serv_cat,"0")},on:{change:function(t){return i.$set(i.notification,"serv_cat","0")}}}),i._v(" "),e("label",{attrs:{for:"serv_cat_all"}},[i._v("По всем")])]),i._v(" "),e("div",{staticStyle:{border:"1px solid silver",padding:"5px 10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.notification.serv_cat,expression:"notification.serv_cat"}],attrs:{type:"radio",id:"serv_cat_2",value:"1"},domProps:{checked:i._q(i.notification.serv_cat,"1")},on:{change:function(t){return i.$set(i.notification,"serv_cat","1")}}}),i._v(" "),e("label",{attrs:{for:"serv_cat_2"}},[i._v("1'ой и 2'ой категории")])]),i._v(" "),e("span",[i._v("* 1 и 2 категория - MegaHigh сайты")])])]),i._v(" "),e("hr"),i._v(" "),e("div",{staticClass:"text-left"},[e("a",{staticClass:"btn btn-primary btn-sm",staticStyle:{width:"150px"},attrs:{href:"#"},on:{click:function(t){return i.saveUserNotification()}}},[i._v("Обновить")])])])])])])])}),[function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"form-group col-md-12"},[this._v("\n                        Ответсвенная группа по Сервис Тикетам:\n                        "),t("hr")])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"form-group col-md-12"},[this._v("\n                        Ответсвенная группа по Ресурс Тикетам:\n                        "),t("hr")])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"form-group col-md-12"},[this._v("\n                        Информирование по sms/email:\n                        "),t("hr")])}],!1,null,null,null);t.default=s.exports}}]);