(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{"3/EX":function(e,n,t){"use strict";t.r(n);var a=t("o0o1"),r=t.n(a),o=t("QwnA"),s=t.n(o);t("kr3+"),t("5gfu");function i(e,n,t,a,r,o,s){try{var i=e[o](s),d=i.value}catch(e){return void t(e)}i.done?n(d):Promise.resolve(d).then(a,r)}function d(e){return function(){var n=this,t=arguments;return new Promise((function(a,r){var o=e.apply(n,t);function s(e){i(o,a,r,s,d,"next",e)}function d(e){i(o,a,r,s,d,"throw",e)}s(void 0)}))}}s.a.validators.resources.fieldIsRequired="Поле обязательно для заполнения!";var c,l={name:"Test",components:{"vue-form-generator":s.a.component},data:function(){return{model:{skills:[]},schema:{fields:[]},formOptions:{validateAfterLoad:!0,validateAfterChanged:!0,validateAsync:!0},formErrors:null}},created:(c=d(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFormData();case 2:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)}),methods:{getFormData:function(){var e=this;return d(r.a.mark((function n(){var t;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e,axios.get("/api/get-form").then((function(n){1===n.data.success&&(e.model=n.data.model[0],e.schema.fields=n.data.schema,t.regenerateForm())})).catch((function(e){}));case 2:case"end":return n.stop()}}),n)})))()},regenerateForm:function(){this.schema.fields.find((function(e){return"description"===e.model}));this.schema.fields.forEach((function(e){"description"===e.model&&(e.selectOptions.onSearch=function(e,n,t){console.log("onSearch",e,n,t),e.length>2&&axios.get("/api/scheme/user/search?query=".concat(e)).then((function(e){for(var n=e.data.items,a=0;a<n.length;a++)if(t.length>1)for(var r=0;r<t.length;r++){var o=!0;if(n[a].id===option[r].id){o=!1;break}!0===o&&t.push({id:n[a].id,name:n[a].email})}else t.push({id:n[a].id,name:n[a].email})}))})}))},onSearchChange:function(e,n){var t=this.selectOptions.onSearch;"function"==typeof t&&t(e,n,this.options)},userSearch:function(e){var n=this;axios.get("/api/scheme/user/search?query=".concat(e)).then((function(e){console.log(e.data.items),n.model.skills=e.data.items}))},sendForm:function(){this.$refs.vfg.errors.forEach((function(e){console.log(e.field.label,e.error)})),console.log(this.$refs.vfg)},prettyJSON:function(e){if(e)return(e=(e=JSON.stringify(e,void 0,4)).replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){var n="number";return/^"/.test(e)?n=/:$/.test(e)?"key":"string":/true|false/.test(e)?n="boolean":/null/.test(e)&&(n="null"),'<span class="'+n+'">'+e+"</span>"}))}}},f=(t("vvHy"),t("KHd+")),p=Object(f.a)(l,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("b-container",{staticClass:"theDashboard",attrs:{tag:"main"}},[t("b-row",[t("b-col",[t("form",{attrs:{novalidate:""}},[t("vue-form-generator",{ref:"vfg",attrs:{schema:e.schema,model:e.model,options:e.formOptions}}),e._v(" "),t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(n){return e.sendForm()}}},[e._v("Submit form")])])],1),e._v(" "),t("div",{staticClass:"panel panel-default"},[t("div",{staticClass:"panel-heading"},[e._v("Model")]),e._v(" "),t("div",{staticClass:"panel-body"},[e.model?t("pre",{domProps:{innerHTML:e._s(e.prettyJSON(e.model))}}):e._e()])]),e._v(" "),t("div",{staticClass:"panel panel-default"},[t("div",{staticClass:"panel-heading"},[e._v("Schema")]),e._v(" "),t("div",{staticClass:"panel-body"},[e.model?t("pre",{domProps:{innerHTML:e._s(e.prettyJSON(e.schema))}}):e._e()])])])],1)],1)}),[],!1,null,"0dae3e4f",null);n.default=p.exports},JBzd:function(e,n,t){(e.exports=t("I1BE")(!1)).push([e.i,'\nhtml[data-v-0dae3e4f] {\n    font-size: 14px;\n}\nbody[data-v-0dae3e4f] {\n    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #333;\n}\npre[data-v-0dae3e4f] {\n    overflow: auto;\n}\npre .string[data-v-0dae3e4f] {\n    color: #885800;\n}\npre .number[data-v-0dae3e4f] {\n    color: blue;\n}\npre .boolean[data-v-0dae3e4f] {\n    color: magenta;\n}\npre .null[data-v-0dae3e4f] {\n    color: red;\n}\npre .key[data-v-0dae3e4f] {\n    color: green;\n}\nh1[data-v-0dae3e4f] {\n    text-align: center;\n    font-size: 36px;\n    margin-top: 20px;\n    margin-bottom: 10px;\n    font-weight: 500;\n}\nfieldset[data-v-0dae3e4f] {\n    border: 0;\n}\n.panel[data-v-0dae3e4f] {\n    margin-bottom: 20px;\n    background-color: #fff;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\n}\n.panel-heading[data-v-0dae3e4f] {\n    color: #333;\n    background-color: #f5f5f5;\n    border-color: #ddd;\n\n    padding: 10px 15px;\n    border-bottom: 1px solid transparent;\n    border-top-left-radius: 3px;\n    border-top-right-radius: 3px;\n}\n.panel-body[data-v-0dae3e4f] {\n    padding: 15px;\n}\n.field-checklist .wrapper[data-v-0dae3e4f] {\n    width: 100%;\n}\n',""])},VhtF:function(e,n,t){var a=t("JBzd");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t("aET+")(a,r);a.locals&&(e.exports=a.locals)},vvHy:function(e,n,t){"use strict";t("VhtF")}}]);